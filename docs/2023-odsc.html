<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0, user-scalable=yes">

	<title>MLOps: Monitoring and Managing Drift</title>

	<link rel="stylesheet" href="revealjs/reveal.js/dist/reset.css" />
    <link rel="stylesheet" href="revealjs/reveal.js/dist/reveal.css" />
    <link rel="stylesheet" href="revealjs/reveal.js/dist/theme/white.css" />

    <!-- Theme used for syntax highlighted code -->
	<!-- <link rel="stylesheet" href="revealjs/reveal.js/plugin/highlight/monokai.css"> -->
	<!-- <link rel="stylesheet" href="revealjs/reveal.js/plugin/highlight/zenburn.css"> -->
    <link rel="stylesheet" href="revealjs/highlight-js-github-theme.css" />
    <link rel="stylesheet" href="revealjs/styles.css" />

</head>

<body style="background-color: whitesmoke;">
	<div class="reveal">
		<div class="slides">
<!-- 

https://odsc.com/california/speakers/

MLOps: Monitoring and Managing Drift

As soon as your machine learning model goes into production everything changes.
You now will need to constantly monitor the performance of your model, evaluate whether it is still sufficient and react accordingly.
This, however, can be a challenge when you have no reliable ground truth to recalibrate its performance.
Typically, you will need to fall back to a surrogate metric that you can measure and that is correlated with the performance of your model.
What those metrics can be and how you track and monitor them is the topic of this workshop.

This workshop consists of two parts:
- Part I: Simulate production on an existing machine learning model and detecting drift
  - an OpenAPI machine learning service will be provided
  - we will use Evidently, Prometheus and Grafana to monitor and detect the drift
- Part II: Interpreting and Analyzing Drift and what to do about it
  - when you have detected drift, you will need to interpret what happened and decide what to do about it
  - among the steps you can take is to retrain your model with new data
  - we might also have to consider to rethink the model architecture or the data we are using

Our objective is to ensure that you are equipped with the essential knowledge and practical tools to proficiently manage
your machine learning models in a real-world production environment.

All services will be provided as Docker images and can be run locally on your machine or in a cloud environment using Gitpod.

-->


		<!-- <section data-markdown class="todo">
			<textarea data-template>
### Aufbau				

Evidently und Drift Detection als Hauptteil inkl. Übung				

Teil 1: so wie OOP, Fallbeispiel etc. Man hat Drift festgestellt
Teil 2: Interpretation, Analyse, Abhilfe

</textarea>
		</section>
		<section data-markdown class="todo">
			<textarea data-template>
## Drift Repo
### Part I:        
- Docker compose für alles bauen
- Drift Repo bauen Docker files Top Level bereithalten

### Part II:        
- analytics notebook hierher bringen
- Schritte fürs Neutrainieren       


</textarea>
		</section>


		    <section data-markdown class="todo">
      <textarea data-template>
### ODSC, nach OOP Talk

- Nach dem Talk mit Generischen Namen ausprobieren
- oder vorher auf dem Gaming Laptop: 
- Liegt es am Webhook in Gitea, Antwort von Tobi:
Der commit trigger ist so implementiert, dass er auf commits in den main branch auf dem gitea repository reagiert.
Wenn du sagst anderes setup, achte auch drauf, dass in Gitea dann der Webhook sauber angelegt worden ist im Gitea
Repository. (Das kann man mit dem Admin User in den Settings des repos nachschauen)

Ansonsten mal im Tekton Dashboard prüfen ob die resourcen alle auch tatsächlich angelegt worden sind.(commit-trigger
usw)

Drift-Repo: 
- docker compose
- Hier gibt es schon ein Docker Compose, vielleicht kann ich mich da bedienen oder zumindest inspirieren lassen
  - https://www.evidentlyai.com/blog/batch-ml-monitoring-architecture
  - https://github.com/evidentlyai/evidently/tree/main/examples/integrations/postgres_grafana_batch_monitoring
  - https://github.com/evidentlyai/evidently/tree/main/examples/integrations/grafana_monitoring_service
  - https://github.com/evidentlyai/evidently/tree/main/examples/integrations/fastapi_monitoring
- Mit Installationsanweisung und Check, ob es geht.  
- Nur Linux, Mac, oder Windows WSL2
- Falls Problem, Issue anlegen

      </textarea>
    </section>

    <section data-markdown class="todo">
		<textarea data-template>
### Architecture

<img src="img/monitoring-stack.jpg" style="height: 530px;" class="fragment">
		</textarea>
    </section>


	<section data-markdown class="todo">
		<textarea data-template>
### Für den Analyse Teil

Interested in how a feature influences machine learning model predictions on average?

https://www.linkedin.com/posts/christoph-molnar_interested-in-how-a-feature-influences-machine-activity-7098247765155004416-nONi
		</textarea>
    </section>


	<section data-markdown class="todo">
		<textarea data-template>
### Stack ist riesig und erfordert viele Entscheidungen

Lieber gemanagtes Environment nutzen
  
	https://aws.amazon.com/de/sagemaker/clarify/
</textarea>
</section>

<section data-markdown class="todo">
	<textarea data-template>
### Darbietung / Story

- Stringenz in der Story / therefor and but, not and then: https://www.instagram.com/reel/CtxLMBDA35H/?igshid=MTc4MmM1YmI2Ng%3D%3D
- Für die Zusammenfassung B drücken und mich nach vorn stellen

</textarea>
</section> -->


<section data-markdown>
    <textarea data-template>
# MLOps: Monitoring and Managing Drift
<h2 style="color: red;">Work in Progress</h2>

ODSC West 2023, https://odsc.com/speakers/mlops-monitoring-and-managing-drift/

Oliver Zeigermann


<img src="img/bit.ly_odsc-west-mlops.png" style="height: 200px;"><br>
Slides: https://bit.ly/odsc-west-mlops

<!-- https://djcordhose.github.io/mlops-drift/2023-odsc.html -->
</textarea>
</section>

<section data-markdown>
## How to prepare

* install the project as described in the readme: https://github.com/DJCordhose/mlops-drift/blob/main/README.md#installation

* do not stress yourself, if you can not get this up and running
  * there will be time for this in the workshop (even though not a lot)
  * you can also just watch and learn,  you will get a lot of benefit even without running the code
  * the second part should work entirely without a local installation
  * when forming teams, it is sufficient to have one person with a working installation
</section>


<section data-markdown>
    <textarea data-template>
## Who is Olli

<div style="display: flex;">
<div style="flex: 50%;">
<a href='https://oreilly.de/produkt/machine-learning-kurz-gut-2/'>
<img src='img/ml-buch-v2.jpg' height="400">
</a>
</div>
<div style="flex: 50%; font-size: x-large;">
<img src='img/olli-opa.jpeg'>
</div>
</div>
<p>
<a target="_blank" href="mailto:oliver@zeigermann.de">Oliver Zeigermann</a>:
Machine Learning Engineer/Architect from Hamburg, Germany
</p>    
</textarea>
</section>


<section data-markdown>
	<textarea data-template>
## Wait, where are the slides?

* the story for this workshop is here: https://github.com/DJCordhose/mlops-drift/blob/main/docs/story.md
* some texts/images/sources/links are still be in German, but this will be fixed before the workshop
* eventually, there _might_ be more slides here, but everything is in the story anyway
* there _might_ be a Miro as well

	</textarea>
</section>

<!-- <section data-markdown class="todo">
  <textarea data-template>
### Google Rubric Score
* https://developers.google.com/machine-learning/guides/rules-of-ml
* https://research.google/pubs/pub46555/
* https://research.google/pubs/pub45742/
* https://laszlo.substack.com/p/article-review-the-ml-test-score
  </textarea>
  </section>


<section data-markdown class="preparation">
	<textarea data-template>
1. 30 Zines vorbereiten und mitbrigen
1. Gitpod starten
   1. im Workspace auch die lokale installation machen
1. Lokale installation starten
   * ich hab eine lokale Installation auf meinem Rechner, falls irgendwas nicht geht
	</textarea>
</section>

<section data-markdown>
	<textarea data-template>
## Why this workshop?    

_I have rarely been this excited about a workshop like this one_
We have all skills coming together for this kind of work:
1. DS, mostly second part
1. Dev
1. Ops    
	</textarea>
</section>


<section data-markdown class="todo">
	<textarea data-template>
### Alles Material sammeln, das ich über MLOps habe

1. wenn auf Englisch, dann Englische Version
1. sonst erstmal auf Deutsch und dann von Copilot übersetzen lassen
1. Eine komplette Stories spinnen, deshalb-aber
1. ausdünnen für ODSC
1. Und eine komplette Version für weitere Iterationen, Booster Bergen 2024 möglich 
	</textarea>
</section>


<section data-markdown>
	<textarea data-template>
### Challenges in Machine Learning Projects

<img src="img/biggest_challenges_ML_MLCon_2023.jpg" style="height: 530px;" class="fragment">

<small>Survey MLConf Berlin 2023</small>
	</textarea>
</section>


<section data-markdown>
	<textarea data-template>
  ### Machine Learning Projecs can be thought as running in phases
  
  <img src='img/ml-phases-small-en.jpg' style="height: 100%;">
  
  </textarea>
</section>

<section data-markdown class="fragments">
  ### MLOps
  
  * MLOps is derived from DevOps
  * MLOps brings ML into production and keeps it in operation
  * A number of tools and practices are used for this
  * Overlap from
    * Software development
    * Operations
    * Data Science
  </section>
  
  
<section data-markdown>
### MLOps 1.0 vs MLOps 2.0

- MLOps 1.0 - research / experiment centric
- MLOps 2.0 - production first
</section>

<section data-markdown>
### MLOps 1.0 - research / experiment centric

  - Managing experiments  and Version control
    - Model Architecture
    - Training Code
    - Data
    - Artefacts
      - Trained Model 
      - Plots (learning curve, confusion matrix)
  - Tools
    - Mlflow
    - Speadsheets
    - Weights & Biases
    - Comet
</section>

<section data-markdown>
### MLOps 2.0 - production first

  - productionize, deploy, maintain
  - Deployment Pipeline
     - Model Repo
       - Rather Image, as Model does not stand for itself most of the time, rather is a system
       - Data Source and Preproc same code dev and prod (if possible)
  - Real world environment
  - Monitoring
    - Gap between training and prod data?
</section>

<section data-markdown>
	<textarea data-template>
### Fun for the first five minutes
## Create your own MLOps Zine

<div class="container">
  <div class="col">
  <img src="img/zine/teaser.jpg" style="height: 100%;">
  <em>Fold</em>
  </div>
  <div class="col">
  <img src="img/zine/fold.jpg" style="height: 100%;">
  <em>Topology change</em>
  
  </div>
</div>
<br>  
<br>  

<small>We are not aiming for highest production quality, but make something physical that you can take home</small>
</textarea>
</section> -->

<!-- <section data-markdown>
	<textarea data-template>
### MLOps - komplettes Zine

<img src="img/zine/mlops.png" style="height: 530px;" class="fragment">

<small>Bildunterschrit</small>
	</textarea>
</section>
 -->

 <!-- <section data-markdown>
	<textarea data-template>
### Use Case: Predict Risk 

<img src="img/zine/use-case.png" style="height: 530px;" class="fragment">

<small>Objective: Risk of potential customer as LOW, MEDIUM, HIGH</small>
	</textarea>
</section>

<section data-markdown>
	<textarea data-template>
### The quality of ML systems usually deteriorates over time

<img src="img/zine/degrade.png" style="height: 530px;" class="fragment">

<small>This is not only true for ML applications, but it is more obvious with them</small>
</textarea>
</section>


<section data-markdown>
	<textarea data-template>
### Updated models are necessary frequently

<img src="img/zine/intervention.png" style="height: 530px;" class="fragment">

<small>Machine Learning applications need maintenance</small>
	</textarea>
</section>

<section data-markdown>
	<textarea data-template>
### Without Ground Truth you need a surrogate metric
  
  <img src="img/zine/drift.png" style="height: 450px;" class="fragment">
  
  
*Distribution of data of requests or predictions differs significantly from that of training* 
  </textarea>
  </section>
  

  <section data-markdown>
    <textarea data-template>
    ### Machine Learning Projecs can be thought as running in phases
    
    <img src='img/ml-phases-en.jpg' style="height: 100%;">
    
    </textarea>
  </section>
  
  
  <section data-markdown>
  ### Phase 0: Enable Organization
  
  _Make sure people on all levels and all roles understand the specific needs and specialties of a machine learning project_
  
  * prepare for 80% garbage factor
  * clash of roles
  * largest part of job begins *after* production
  * this might be the hardest and least part of the overall job
  
  Links
  * https://fearlesschangepatterns.com/
  * https://www.rejectiontherapy.com/
  </section>
  
  <section data-markdown>
    <textarea data-template>
  ### Phase 1: Data Engineering
    
    _Make sure you have a reliable, reproducible and scalable data pipeline_
    
    * data versioning
    * data validation
    * data reproducibility
    * data scalability
    
    Links
    * https://www.kdnuggets.com/2021/03/data-version-control-what-why-how.html
    *
  </textarea>
  </section>
  
     -->

		</div>
	</div>
	<script src="revealjs/reveal.js/dist/reveal.js"></script>
	<script src="revealjs/reveal.js/plugin/notes/notes.js"></script>
	<script src="revealjs/reveal.js/plugin/markdown/markdown.js"></script>
	<script src="revealjs/reveal.js/plugin/highlight/highlight.js"></script>
	<script src="revealjs/config.js"></script>

</body>

</html>
